my %tld2cont =
('ae' => 'Asia',
'af' => 'Asia',
'ag' => 'South America',
'ai' => 'Asia',
'al' => 'Europe',
'am' => 'Asia',
'an' => 'Asia',
'ao' => 'Africa',
'aq' => 'Antarctica',
'ar' => 'South America',
'as' => 'Oceania',
'at' => 'Europe',
'au' => 'Oceania',
'aw' => 'South America',
'az' => 'Europe',
'ba' => 'Europe',
'bb' => 'South America',
'bd' => 'Asia',
'be' => 'Europe',
'bf' => 'Africa',
'bg' => 'Europe',
'bh' => 'Asia',
'bi' => 'Asia',
'bj' => 'Africa',
'bm' => 'South America',
'bn' => 'Asia',
'bo' => 'South America',
'br' => 'South America',
'bs' => 'South America',
'bt' => 'Asia',
'bv' => 'Europe',
'bw' => 'Africa',
'by' => 'Asia',
'bz' => 'South America',
'ca' => 'North America',
'cc' => 'Asia',
'cf' => 'Africa',
'cg' => 'Africa',
'ch' => 'Europe',
'ci' => 'Africa',
'ck' => 'Oceania',
'cl' => 'South America',
'cm' => 'Africa',
'cn' => 'Asia',
'co' => 'South America',
'cr' => 'South America',
'cu' => 'South America',
'cv' => 'Africa',
'cx' => 'Asia',
'cy' => 'Europe',
'cz' => 'Europe',
'de' => 'Europe',
'dj' => 'Africa',
'dk' => 'Europe',
'dm' => 'South America',
'do' => 'South America',
'dz' => 'Africa',
'ec' => 'South America',
'ee' => 'Europe',
'eg' => 'Africa',
'eh' => 'Africa',
'es' => 'Europe',
'et' => 'Africa',
'fi' => 'Europe',
'fj' => 'Oceania',
'fk' => 'South America',
'fm' => 'Oceania',
'fo' => 'Europe',
'fr' => 'Europe',
'fx' => 'Europe',
'ga' => 'Africa',
'gb' => 'Europe',
'gd' => 'South America',
'ge' => 'Asia',
'gf' => 'Africa',
'gh' => 'Africa',
'gi' => 'Europe',
'gl' => 'Europe',
'gm' => 'Africa',
'gn' => 'Africa',
'gp' => 'Africa',
'gq' => 'Africa',
'gr' => 'Europe',
'gt' => 'South America',
'gu' => 'Oceania',
'gw' => 'Africa',
'gy' => 'Africa',
'hk' => 'Asia',
'hm' => 'Oceania',
'hn' => 'South America',
'hr' => 'Europe',
'ht' => 'South America',
'hu' => 'Europe',
'id' => 'Asia',
'ie' => 'Europe',
'il' => 'Asia',
'in' => 'Asia',
'io' => 'Asia',
'iq' => 'Asia',
'ir' => 'Asia',
'is' => 'Europe',
'it' => 'Europe',
'jm' => 'South America',
'jo' => 'Asia',
'jp' => 'Asia',
'ke' => 'Africa',
'kg' => 'Asia',
'kh' => 'Asia',
'ki' => 'Oceania',
'km' => 'Asia',
'kn' => 'Asia',
'kp' => 'Asia',
'kr' => 'Asia',
'kw' => 'Asia',
'ky' => 'Asia',
'kz' => 'Asia',
'la' => 'Asia',
'lb' => 'Asia',
'lc' => 'Asia',
'li' => 'Europe',
'lk' => 'Asia',
'lr' => 'Africa',
'ls' => 'Africa',
'ls' => 'Africa',
'lt' => 'Europe',
'lu' => 'Europe',
'lv' => 'Europe',
'ly' => 'Africa',
'ma' => 'Africa',
'mc' => 'Europe',
'md' => 'Europe',
'mg' => 'Africa',
'mh' => 'Oceania',
'mk' => 'Europe',
'ml' => 'Africa',
'mm' => 'Africa',
'mn' => 'Asia',
'mo' => 'Asia',
'mp' => 'Oceania',
'mq' => 'Africa',
'mr' => 'Africa',
'ms' => 'Africa',
'mt' => 'Europe',
'mu' => 'Africa',
'mv' => 'Asia',
'mw' => 'Africa',
'mx' => 'North America',
'my' => 'Asia',
'mz' => 'Africa',
'na' => 'Africa',
'nc' => 'Oceania',
'ne' => 'Africa',
'nf' => 'Oceania',
'ng' => 'Africa',
'ni' => 'South America',
'nl' => 'Europe',
'no' => 'Europe',
'np' => 'Asia',
'nr' => 'Oceania',
'nt' => 'Asia',
'nu' => 'Oceania',
'nz' => 'Oceania',
'om' => 'Asia',
'pa' => 'South America',
'pe' => 'South America',
'pf' => 'Oceania',
'pg' => 'Asia',
'ph' => 'Asia',
'pk' => 'Asia',
'pl' => 'Europe',
'pm' => 'North America',
'pn' => 'Oceania',
'pr' => 'South America',
'pt' => 'Europe',
'pw' => 'Oceania',
'py' => 'South America',
'qa' => 'Asia',
're' => 'Africa',
'ro' => 'Europe',
'ru' => 'Europe',
'rw' => 'Africa',
'sa' => 'Asia',
'sb' => 'Oceania',
'sc' => 'Asia',
'sd' => 'Africa',
'se' => 'Europe',
'sg' => 'Asia',
'sh' => 'Africa',
'si' => 'Europe',
'sj' => 'Europe',
'sk' => 'Europe',
'sl' => 'Africa',
'sm' => 'Europe',
'sn' => 'Africa',
'so' => 'Africa',
'sr' => 'South America',
'st' => 'South America',
'su' => 'Asia',
'sv' => 'South America',
'sy' => 'Asia',
'sz' => 'Africa',
'tc' => 'Asia',
'td' => 'Africa',
'tf' => 'Africa',
'tg' => 'Africa',
'th' => 'Asia',
'tj' => 'Asia',
'tk' => 'Oceania',
'tm' => 'Asia',
'tn' => 'Africa',
'to' => 'Oceania',
'tp' => 'Asia',
'tr' => 'Asia',
'tt' => 'South America',
'tv' => 'Oceania',
'tw' => 'Asia',
'tz' => 'Africa',
'ua' => 'Europe',
'ug' => 'Africa',
'uk' => 'Europe',
'um' => 'North America',
'us' => 'North America',
'uy' => 'South America',
'uz' => 'Asia',
'va' => 'Europe',
'vc' => 'South America',
've' => 'South America',
'vg' => 'South America',
'vi' => 'South America',
'vn' => 'Asia',
'vu' => 'Oceania',
'wf' => 'Oceania',
'ws' => 'Oceania',
'ye' => 'Asia',
'yt' => 'Africa',
'yu' => 'Europe',
'za' => 'Africa',
'zm' => 'Africa',
'zr' => 'Africa',
'zw' => 'Africa',
'er' => 'Africa',
 );

sub mycountry {
    my ($ip)=@_;
    my @o=`/home/dast/bin/ipwhere $ip`;
    my ($tld, $area, $full);
    for(@o) {
        if($_ =~ /^TLD: (.*)/) {
            $tld = $1;
        }
        elsif($_ =~ /^AREA: (.*)/) {
            $area = $1;
        }
        elsif($_ =~ /^FULL: (.*)/) {
            $full = $1;
        }
    }

    return ($tld, $area, $full);
}

# convert a two-letter TLD to a full text continent string
sub tld2continent {
    my ($tld)=@_;

    return $tld2cont{lc($tld)};
}

1;
